<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>íŠ¸ë Œë“œ ì„±í–¥ í…ŒìŠ¤íŠ¸</title>
  <style>
    :root{
      --ink:#0f172a;      /* text */
      --muted:#475569;    /* sub text */
      --line:#e2e8f0;     /* border */
      --card:#ffffff;     /* surfaces */
      --accent:#5a8cff;   /* primary accent */
      --ok:#16a34a; --warn:#f59e0b; --violet:#7c3aed;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans"; color:var(--ink); background:#fff}

    .wrap{max-width:720px; margin:0 auto; padding:20px 16px 100px}

    header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:14px}
    .brand{display:flex; gap:10px; align-items:center}
    .logo{width:36px; height:36px; border-radius:10px; background:var(--card); border:1px solid var(--line); display:grid; place-items:center; box-shadow:0 6px 16px rgba(0,0,0,.06)}
    .logo span{font-weight:800}
    h1{font-size:clamp(20px,3.8vw,30px); margin:0}
    .sub{color:var(--muted); font-size:14px}

    .card{background:var(--card); border:1px solid var(--line); border-radius:16px; padding:20px; box-shadow:0 10px 30px rgba(2,6,23,.06)}

    .step{display:none}
    .step.show{display:block}

    /* ë²„íŠ¼ ë°” */
    .actions{position:fixed; left:0; right:0; bottom:0; padding:14px 16px; background:linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,.95) 30%, rgba(255,255,255,1)); border-top:1px solid var(--line)}
    .btnrow{max-width:720px; margin:0 auto; display:flex; gap:10px;}
    button{appearance:none; border:none; cursor:pointer; padding:14px 16px; border-radius:12px; font-weight:700; font-size:16px}
    .primary{background:var(--accent); color:white}
    .ghost{background:transparent; color:var(--ink); border:1px solid var(--line)}
    .muted{background:#e5e7eb; color:#334155}
    button[disabled]{opacity:.5; cursor:not-allowed}

    /* ì§ˆë¬¸ ì¹´ë“œ */
    .q-title{font-weight:700; font-size:18px; line-height:1.5}
    .scale{display:flex; flex-direction:column; gap:10px; margin-top:16px}
    .likert{display:flex; align-items:center; justify-content:space-between; gap:clamp(6px,3vw,16px);}
    .likert .item{position:relative; display:grid; place-items:center}
    .likert input{position:absolute; opacity:0; width:0; height:0}
    .dot{width:clamp(40px,12vw,60px); height:clamp(40px,12vw,60px); border-radius:999px; background:#fff; border:3px solid var(--line); box-shadow:0 2px 8px rgba(2,6,23,.06); transition:transform .1s ease, border-color .2s ease, box-shadow .2s ease}
    .likert input:checked + .dot{border-color:var(--accent); box-shadow:inset 0 0 0 6px rgba(90,140,255,.15)}
    .likert .item:active .dot{transform:scale(.96)}
    .scale .labels{display:flex; justify-content:space-between; font-weight:700; color:var(--muted); padding:0 4px}

    /* ì§„í–‰ë°” */
    .progress{height:10px; background:#ffffff; border:1px solid var(--line); border-radius:999px; overflow:hidden}
    .bar{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), #7dd3fc)}

    /* ê²°ê³¼ ì¹´ë“œ */
    .result-header{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
    .tag{font-family:ui-monospace, monospace; padding:2px 6px; border:1px solid var(--line); border-radius:6px; background:#fff}
    .gauges{display:grid; gap:10px; margin-top:12px}
    @media (min-width:640px){ .gauges{grid-template-columns:repeat(3,1fr)} }
    .gauge{padding:12px; border:1px solid var(--line); border-radius:12px}
    .gauge h4{margin:0 0 8px 0; font-size:13px; color:var(--muted)}
    .bar2{height:12px; background:#eef2ff; border-radius:999px; overflow:hidden; border:1px solid var(--line)}
    .fill{height:100%; width:0%}
    .fill.S{background:#60a5fa}
    .fill.V{background:#34d399}
    .fill.A{background:#fbbf24}

    /* í•´ì„¤ */
    .section-title{margin:12px 0 6px 0; font-size:16px; font-weight:800}
    .para{line-height:1.7}
    .character{margin-top:10px; padding:10px 12px; border:1px dashed var(--line); border-radius:12px; background:#fafafa; color:#334155}
    .image-slot{margin-top:14px; border:2px dashed var(--line); border-radius:12px; background:#fff; aspect-ratio:16/9; display:grid; place-items:center; color:var(--muted)}
    .hide{display:none !important}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"><span>TT</span></div>
        <div>
          <h1>íŠ¸ë Œë“œ ì„±í–¥ í…ŒìŠ¤íŠ¸</h1>
          <div class="sub">íŒì—… ì•„ë‹ˆê¸´ í•´ Â· ê´€ê° ì°¸ì—¬í˜• ì—°ê·¹</div>
        </div>
      </div>
      <div id="progressWrap" style="min-width:120px">
        <div class="progress" aria-label="ì§„í–‰ë¥ "><div class="bar" id="prog"></div></div>
      </div>
    </header>

    <!-- STEP 0: ì†Œê°œ -->
    <section class="card step show" id="step0">
      <div class="center">
        <h2 style="margin:6px 0 0 0; padding: 0 0 6px 0">ë‚´ ì·¨í–¥ vs ìœ í–‰, ë‚˜ëŠ” ì–´ë–¤ íƒ€ì…?</h2>
        <p class="sub" style="margin:0">ì§ˆë¬¸ì— ì°¨ë¡€ëŒ€ë¡œ ë‹µí•˜ê³  ë§ˆì§€ë§‰ì— ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
        <ul class="sub" style="margin:8px 0 0 0; padding-left:18px; text-align:left">
          <li>ë¬¸í•­ì€ í•œ í˜ì´ì§€ì— í•˜ë‚˜ì”© í‘œì‹œë©ë‹ˆë‹¤.</li>
          <li>ê° ë¬¸í•­ì€ 5ë‹¨ê³„ ì˜ê²¬ ì„ íƒ(ì „í˜€ ì•„ë‹ˆë‹¤ â†’ ë§¤ìš° ê·¸ë ‡ë‹¤)ì…ë‹ˆë‹¤.</li>
          <li>ë§ˆì§€ë§‰ í˜ì´ì§€ì—ì„œ ê²°ê³¼ ì¹´ë“œê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</li>
        </ul>
      </div>
    </section>

    <!-- STEP 1~10: ë¬¸í•­ (ë™ì  ë Œë”) -->
    <section class="step" id="stepQ"><div class="card" id="qCard"></div></section>

    <!-- STEP 11: ê²°ê³¼ -->
    <section class="card step" id="stepR">
      <div class="result-header">
        <div id="badge" class="tag">íƒ€ì…</div>
        <h3 id="typeName" style="margin:0">-</h3>
      </div>
      <div class="gauges" style="margin-top:6px">
        <div class="gauge"><h4>S ë¯¼ê°ë„</h4><div class="bar2"><div class="fill S" id="barS"></div></div></div>
        <div class="gauge"><h4>V íƒœë„</h4><div class="bar2"><div class="fill V" id="barV"></div></div></div>
        <div class="gauge"><h4>A ììœ¨ì„±</h4><div class="bar2"><div class="fill A" id="barA"></div></div></div>
      </div>
      <div class="section-title">í•´ì„ & ì „ëµ</div>
      <div id="resultBody" class="para"></div>
      <div id="characterNote" class="character"></div>
      <div id="imageSlot" class="image-slot">ì´ë¯¸ì§€ ìë¦¬</div>
    </section>
  </div>

  <!-- ê³ ì • ë²„íŠ¼ ë°” -->
  <div class="actions">
    <div class="btnrow">
      <button class="ghost" id="btnPrev" disabled>ì´ì „</button>
      <button class="primary" id="btnNext">ì‹œì‘í•˜ê¸°</button>
    </div>
  </div>

  <script>
    // -------------------------------
    // ë°ì´í„° (ì‚¬ìš©ì ì œê³µ ë¬¸êµ¬ ê·¸ëŒ€ë¡œ)
    // -------------------------------
    const QUESTIONS = [
      { id:1, text:"ë‚˜ëŠ” ìƒˆë¡œìš´ ìœ í–‰Â·ë°ˆì„ ë‚¨ë“¤ë³´ë‹¤ ë¹¨ë¦¬ ì•Œì•„ì°¨ë¦¬ëŠ” í¸ì´ë‹¤.", key:"S", rev:false },
      { id:2, text:"ìƒˆë¡œ ëœ¨ëŠ” ì¹´í˜Â·ì œí’ˆÂ·ì•±ì€ ì§ì ‘ ì¨ë³´ë©° ê°ì„ ìµíŒë‹¤.", key:"S", rev:false },
      { id:3, text:"ë°”ë¹ ë„ íŠ¸ë Œë“œ ê´€ë ¨ ì†Œì‹ì€ ë†“ì¹˜ê¸° ì‹«ë‹¤.", key:"S", rev:false },
      { id:4, text:"ìš”ì¦˜ â€˜ìœ í–‰ ë”°ë¼ê°€ê¸°â€™ ë¬¸í™”ê°€ í”¼ê³¤í•˜ê²Œ ëŠê»´ì§„ë‹¤.", key:"V", rev:true },
      { id:5, text:"ìœ í–‰ì€ ì¬ë¯¸ìˆê³  ì°½ì˜ì„±ì„ ìê·¹í•œë‹¤ê³  ëŠë‚€ë‹¤.", key:"V", rev:false },
      { id:6, text:"ë‚¨ë“¤ì´ í•œë‹¤ê³  í•´ì„œ ë”°ë¼í•˜ê¸°ë³´ë‹¤ ë‚´ ë°©ì‹ëŒ€ë¡œ í•œë‹¤.", key:"A", rev:false },
      { id:7, text:"ì£¼ë³€ì—ì„œ í™”ì œì—¬ë„ ê´€ì‹¬ ì—†ìœ¼ë©´ ê·¸ëƒ¥ ì§€ë‚˜ì¹œë‹¤.", key:"A", rev:false },
      { id:8, text:"ìœ í–‰ì€ ê¸ˆë°© ì‹ìœ¼ë‹ˆ í° ì˜ë¯¸ê°€ ì—†ë‹¤ê³  ë³¸ë‹¤.", key:"V", rev:true },
      { id:9, text:"í•œ ë²ˆ ê´€ì‹¬ì´ ìƒê¸°ë©´ ê¹Šê²Œ íŒŒê³ ë“¤ì–´ ì²´ë“í•œë‹¤.", key:"S", rev:false },
      { id:10, text:"ìš”ì¦˜ íë¦„ê³¼ ë‚´ ì·¨í–¥ì´ ì¶©ëŒí•˜ë©´ ë‚´ ì·¨í–¥ì„ ìš°ì„ í•œë‹¤.", key:"A", rev:false },
    ];

    // ê²°ê³¼ ì¹´ë“œìš© í…ìŠ¤íŠ¸(ê·¸ëŒ€ë¡œ ë…¸ì¶œ)
    const TYPE_TEXT = {
      "íŠ¸ë Œë“œ ì„œí¼": {
        emoji:"ğŸ„â€â™‚ï¸",
        body:`ë³€í™”ì˜ ê²°ì„ ëˆ„êµ¬ë³´ë‹¤ ë¹¨ë¦¬ ì½ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ê²ƒì— ëŒ€í•œ ê°ê°ì´ ë›°ì–´ë‚˜ê³ , ë‚¨ë“¤ë³´ë‹¤ ë¨¼ì € ì‚¬ìš©í•´ë³´ë©° ì¬ë¯¸ì™€ ì¸ì‚¬ì´íŠ¸ë¥¼ ì–»ëŠ” í¸ì…ë‹ˆë‹¤. ìœ í–‰ì„ ì¢‡ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìœ í–‰ ìœ„ì—ì„œ ë…¸ëŠ” ì‚¬ëŒì— ê°€ê¹ìŠµë‹ˆë‹¤. ì‹œë„í•´ë³¼ ì „ëµ â€œë¹ ë¥¸ íë ˆì´ì…˜â€ì´ ê°•ì ì´ë‹ˆ ì§§ì€ ë¦¬ë·° ì½˜í…ì¸ (SNS, ë¸”ë¡œê·¸, ë™ë£Œ ê³µìœ )ë¡œ ì „í™˜í•´ë³´ì„¸ìš”. ì§€ë‚˜ì¹˜ê²Œ ì‹ ì„ í•¨ë§Œ ì°¾ë‹¤ ê¸ˆë°© ì§ˆë¦¬ëŠ” íŒ¨í„´ì„ ê²½ê³„í•˜ë©´ ë” ì˜¤ë˜ê°‘ë‹ˆë‹¤. ì£¼ë³€ì¸ì—ê²Œ â€œì–´ë–¤ íë¦„ì´ ì™œ ëœ¨ëŠ”ì§€â€ ì„¤ëª…í•´ì£¼ë©´ ì‚¬ëŒë“¤ì´ ì˜ì¡´í•˜ëŠ” ì¸ì‚¬ì´íŠ¸ ì œê³µìê°€ ë©ë‹ˆë‹¤.`,
        character:`ê·¹ ì¤‘ ì¸ë¬¼ë¡œëŠ” â€˜íŠ¸ë Œë“œ ì™•â€™ì„ ë‹®ì•˜êµ°ìš”!`
      },
      "íŠ¸ë Œë“œ ìŠ¤ìœ„ë¨¸": {
        emoji:"ğŸŠ",
        body:`ìœ í–‰ì´ ì£¼ëŠ” í™œê¸°ë¥¼ ì¢‹ì•„í•˜ë©°, íë¦„ì„ ì²œì²œíˆ ë”°ë¼ í—¤ì—„ì¹˜ë“¯ í¸ì•ˆí•˜ê²Œ ì¦ê¸°ëŠ” íƒ€ì…ì…ë‹ˆë‹¤. ì§‘ì°©í•˜ê±°ë‚˜ ë’¤ì²˜ì§„ë‹¤ëŠ” ë¶ˆì•ˆ ì—†ì´, í•„ìš”í•œ ë§Œí¼ë§Œ ìì—°ìŠ¤ëŸ½ê²Œ í¡ìˆ˜í•©ë‹ˆë‹¤. ì‹œë„í•´ë³¼ ì „ëµ ê´€ì‹¬ ë¶„ì•¼ë³„ë¡œ í•µì‹¬ë§Œ ëª¨ìœ¼ëŠ” êµ¬ë… or íŒ”ë¡œìš° ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ë©´ ê´€ë¦¬ê°€ ë” í¸í•´ì§‘ë‹ˆë‹¤. ë„ˆë¬´ ë§ì€ ì •ë³´ë¥¼ ê±¸ëŸ¬ë‚´ë‹¤ ì¤‘ìš”í•œ ì‹ í˜¸ë¥¼ ë†“ì¹  ìˆ˜ ìˆìœ¼ë‹ˆ **ì›” 1íšŒ â€˜ì‹ ê·œ íƒìƒ‰ íƒ€ì„â€™**ì„ ê°€ì ¸ë³´ì„¸ìš”. ë‚´ ì·¨í–¥ê³¼ íŠ¸ë Œë“œê°€ ë§Œë‚˜ëŠ” ì§€ì ì„ ì°¾ìœ¼ë©´ ì·¨ë¯¸Â·ì¼ ëª¨ë‘ í™•ì¥ì„±ì´ ìƒê¹ë‹ˆë‹¤.`,
        character:`ê·¹ ì¤‘ ì¸ë¬¼ë¡œëŠ” â€˜ì¹´í˜ ì‚¬ì¥â€™ì„ ë‹®ì•˜êµ°ìš”!`
      },
      "íŠ¸ë Œë“œ ëŸ¬ë„ˆ": {
        emoji:"ğŸƒ",
        body:`ì •ë³´ íŒŒì•… ì†ë„ê°€ ë¹ ë¥´ê³  ì°¸ì—¬ë„ ë†’ì§€ë§Œ, ë’¤ì²˜ì§€ê¸° ì‹«ì€ ë§ˆìŒì´ ì¡°ê¸ˆ ì‘ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¸ë Œë“œë¥¼ ì˜ ë”°ë¼ê°€ì§€ë§Œ, ì•„ì§ â€œë‚´ ë°©ì‹â€ì´ ì™„ì „íˆ ì¡íˆì§€ ì•Šì•„ í”¼ë¡œë„ê°€ ìƒê¸¸ ë•Œë„ ìˆìŠµë‹ˆë‹¤. ì‹œë„í•´ë³¼ ì „ëµ â€œì™œ ì´ê±¸ ì†Œë¹„í•˜ëŠ”ê°€?â€ ê°„ë‹¨í•œ í•œ ì¤„ ë©”ëª¨ë¥¼ ë‚¨ê¸°ë©´ ì†Œë¹„ ë°©í–¥ì´ ì •ë¦¬ë©ë‹ˆë‹¤. íŠ¸ë Œë“œ ì¤‘ì—ì„œë„ â€˜ê°€ì„±ë¹„ ë†’ì€ í•µì‹¬â€™ë§Œ ê³¨ë¼ ì²´í—˜í•˜ëŠ” í•„í„° ì „ëµì´ ë„ì›€ë©ë‹ˆë‹¤. í•„ìš” ì´ìƒìœ¼ë¡œ ë¹„êµÂ·ê²€ìƒ‰ì— ì‹œê°„ì„ ì“°ì§€ ì•Šë„ë¡ ì‚¬ìš© ì‹œê°„ì— ì œí•œì„ ê±¸ë©´ ë§Œì¡±ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤.`,
        character:`ê·¹ ì¤‘ ì¸ë¬¼ë¡œëŠ” í—ˆëŒ€í‘œë¥¼ ë‹®ì•˜êµ°ìš”!`
      },
      "íŠ¸ë Œë“œ ì°ë¨¹ëŸ¬": {
        emoji:"ğŸ°",
        body:`ì¼ë‹¨ ìœ í–‰ì€ ì•Œì•„ë‘ì§€ë§Œ, ê¹Šê²Œ ë›°ì–´ë“¤ê¸°ë³´ë‹¨ í•œì…ë§Œ ë§›ë³´ëŠ” ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤. í•„ìš”í•  ë•Œë§Œ ê°€ë³ê²Œ ì†Œë¹„í•˜ë©°, í° ì—ë„ˆì§€ íˆ¬ì… ì—†ì´ë„ íë¦„ì„ íŒŒì•…í•©ë‹ˆë‹¤. ì‹œë„í•´ë³¼ ì „ëµ â€œê°€ì„±ë¹„ ë†’ì€ ì²´í—˜â€ì„ ë¯¸ë¦¬ ë¦¬ìŠ¤íŠ¸ì—…(ì¹´í˜, ì „ì‹œ, ì•± ë“±)í•´ë‘ë©´ í•„ìš”í•  ë•Œ ë¹ ë¥´ê²Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ë³€ì— â€˜íŠ¸ë Œë“œ ì˜ ì•„ëŠ” ì¹œêµ¬â€™ë¥¼ ë‘ë©´ ì •ë³´ ìˆ˜ì§‘ ë¹„ìš©ì´ ë” ì¤„ì–´ë“­ë‹ˆë‹¤. ê´€ì‹¬ì´ ìƒê¸´ ë¶„ì•¼ í•˜ë‚˜ ì •ë„ëŠ” â€˜ì¥ê¸° ì·¨í–¥â€™ìœ¼ë¡œ í‚¤ìš°ê¸° ì‹œë„í•´ë³´ë©´ ì˜ì™¸ì˜ ë§Œì¡±ê°ì´ í½ë‹ˆë‹¤.`,
        character:`ê·¹ì¤‘ ì¸ë¬¼ë¡œëŠ” â€˜ë§ˆì¼€íŒ… ì¸í„´ Zoeâ€™ë¥¼ ë‹®ì•˜êµ°ìš”!`
      },
      "íŠ¸ë Œë“œ ë¶ˆí¸ëŸ¬": {
        emoji:"ğŸ˜®â€ğŸ’¨",
        body:`ìœ í–‰ì´ ë„ˆë¬´ ë¹ ë¥´ê³  ì‹œë„ëŸ½ë‹¤ê³  ëŠë¼ëŠ” í¸ì…ë‹ˆë‹¤. ì •ë³´ëŠ” ì•Œê³  ìˆì§€ë§Œ, íŠ¸ë Œë“œ ë§ì¶”ê¸°ê°€ í”¼ê³¤í•˜ê±°ë‚˜ ì–µì§€ìŠ¤ëŸ½ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. â€˜ë‚´ ì‚¶ì˜ ë¦¬ë“¬ì´ ë” ì¤‘ìš”í•˜ë‹¤â€™ëŠ” ê°ê°ì´ ëšœë ·í•©ë‹ˆë‹¤. ì‹œë„í•´ë³¼ ì „ëµ íŠ¸ë Œë“œ ì¤‘ì—ì„œë„ ì¼ìƒ íš¨ìœ¨ì„ ë†’ì´ëŠ” ì‹¤ìš©í˜•ë§Œ ê°€ë³ê²Œ ì·¨ì‚¬ ì„ íƒí•´ë³´ì„¸ìš”(ìƒì‚°ì„± ì•±, ìƒí™œìš©í’ˆ ë“±). â€œë‚¨ë“¤ì²˜ëŸ¼ í•´ì•¼ í•œë‹¤â€ëŠ” ì••ë°• ëŒ€ì‹ , í•„ìš”í•œ ìˆœê°„ì—ë§Œ ì„ íƒì  ì†Œë¹„í•˜ë©´ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤. ë•Œë•Œë¡œ â€˜ë‚´ê°€ ì™œ ë¶ˆí¸í–ˆëŠ”ì§€â€™ ì ì–´ë³´ë©´ ì·¨í–¥Â·ê°€ì¹˜ê´€ì´ ì˜¤íˆë ¤ ë˜ë ·í•´ì§‘ë‹ˆë‹¤.`,
        character:`ê·¹ ì¤‘ ì¸ë¬¼ë¡œëŠ” í˜„ë³´ì€ ì„ ë‹®ì•˜êµ°ìš”!`
      },
      "íŠ¸ë Œë“œ ë°¸ëŸ°ì„œ": {
        emoji:"âš–ï¸",
        body:`ìœ í–‰ê³¼ ì·¨í–¥ì„ ë˜‘ê°™ì´ ì¤‘ìš”í•œ ê¸°ì¤€ìœ¼ë¡œ ë‘ëŠ” ê· í˜•í˜•. ë‚¨ë“¤ì´ í•œë‹¤ê³  ë”°ë¼ê°€ì§€ ì•Šì§€ë§Œ, í•„ìš”í•˜ë‹¤ë©´ ìœ ì—°í•˜ê²Œ ë°›ì•„ë“¤ì…ë‹ˆë‹¤. ì„¼ìŠ¤ ìˆëŠ” í˜„ì‹¤ê°ê° + ìê¸° ì·¨í–¥ì˜ ë¿Œë¦¬ê°€ í•¨ê»˜ ì¡´ì¬í•©ë‹ˆë‹¤. ì‹œë„í•´ë³¼ ì „ëµ ì·¨í–¥ ë¦¬ìŠ¤íŠ¸(ì¢‹ì•„í•˜ëŠ” ë¸Œëœë“œ, ì½˜í…ì¸ , ìŠ¤íƒ€ì¼)ë¥¼ ì •ë¦¬í•´ë‘ë©´ íƒ€í˜‘í•  ë•Œ ê¸°ì¤€ì´ ëª…í™•í•´ì§‘ë‹ˆë‹¤. ê°€ë”ì€ ë‚´ ì·¨í–¥ì„ ë‚¨ì—ê²Œ ì†Œê°œí•˜ê±°ë‚˜ ì¶”ì²œí•´ë³´ì„¸ìš” â†’ ê´€ê³„ ì†ì—ì„œ ë§¤ë ¥ë„â†‘ íŠ¸ë Œë””í•¨ì´ í•„ìš”í•  ë• â€˜ë¯¸ë‹ˆë©€ ì ìš©â€™(í•œë‘ ìš”ì†Œë§Œ ë°˜ì˜)ìœ¼ë¡œ ë¶€ë‹´ ì—†ì´ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
        character:`ê·¹ì˜ ì£¼ì¸ê³µ í˜„ë³´ì€ì´ ë˜ê³ ì‹¶ì€ ëª¨ìŠµì„ ë²Œì¨ ì´ë£¬ ë‹¹ì‹ ! ëŒ€ë‹¨í•´ìš”!`
      },
      "íŠ¸ë Œë“œ ì±Œë¦°ì €": {
        emoji:"ğŸ§—",
        body:`íŠ¸ë Œë“œë³´ë‹¤ëŠ” ìê¸° ê¸°ì¤€, ìê¸° ê°ê°ì´ í™•ê³ í•œ í¸ì…ë‹ˆë‹¤. â€œì–¸ì  ê°€ ì‚¬ëŒë“¤ì´ ì´ê±¸ ì•Œì•„ë³¼ ê±°ì•¼â€ë¼ëŠ” ë¯¸ë˜ ì§€í–¥ì  ìê¸° í™•ì‹ ì´ ìˆìŠµë‹ˆë‹¤. ëŒ€ì„¸ì™€ ë‹¬ë¼ë„ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ë…ë¦½ì ì¸ ì·¨í–¥. ì‹œë„í•´ë³¼ ì „ëµ ê´€ì‹¬ ë¶„ì•¼ í•˜ë‚˜ëŠ” ì‹¤ì œ ê²°ê³¼ë¬¼ë¡œ ë‚¨ê²¨ë³´ì„¸ìš”(ì»¬ë ‰ì…˜, ë¸ŒëŸ°ë”© ê¸°ë¡, ì‘ì€ í”„ë¡œì íŠ¸). ì·¨í–¥ì˜ ê·¼ê±°(ì™œ ì¢‹ì•„í•˜ëŠ”ì§€)ë¥¼ ê¸€ì´ë‚˜ ì‚¬ì§„ìœ¼ë¡œ ì •ë¦¬í•˜ë©´ ì„¤ë“ë ¥ê³¼ ìì¡´ê°ì´ í•¨ê»˜ ì˜¬ë¼ê°‘ë‹ˆë‹¤. íŠ¸ë Œë“œì™€ì˜ ì¶©ëŒì´ ê³„ì† ë¶ˆí¸í•˜ë‹¤ë©´, â€˜ì–•ì€ ì—°ê²°â€™ ì „ëµ(í•œë‘ ê°œë§Œ ì²´í—˜)ìœ¼ë¡œ ì‚¬íšŒì  ë§¥ë½ë§Œ í™•ë³´í•˜ë©´ ë©ë‹ˆë‹¤.`,
        character:`ê·¹ ì¤‘ ì¸ë¬¼ë¡œëŠ” í˜„ì¡°ì€ì„ ë‹®ì•˜êµ°ìš”!`
      },
      "íŠ¸ë Œë“œë¥¼ ê±°ë¶€í•˜ëŠ” ì†Œë‚˜ë¬´": {
        emoji:"ğŸŒ²",
        body:`ëŠì„ì—†ì´ ë°”ë€ŒëŠ” íë¦„ì´ ì˜ë¯¸ ì—†ê±°ë‚˜ ë¶€ë‹´ìŠ¤ëŸ½ê²Œ ëŠê»´ì§€ê³ , ì¼ê´€ì„±ê³¼ ì•ˆì •ì„ ì¤‘ìš”í•˜ê²Œ ì—¬ê¹ë‹ˆë‹¤. ì–´ë–¤ ë¶„ì•¼ë“  ì˜¤ë˜, ì²œì²œíˆ, ê¹Šê²Œ íŒŒëŠ” ìŠ¤íƒ€ì¼ë¡œ ì·¨í–¥ì˜ ë¿Œë¦¬ê°€ ë‹¨ë‹¨í•©ë‹ˆë‹¤. ì‹œë„í•´ë³¼ ì „ëµ íŠ¸ë Œë“œë¥¼ ê±°ë¶€í•œë‹¤ê³  í•´ì„œ ë‹¨ì ˆí•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤ â†’ ì‹¤ìš©ì ì¸ ë¶€ë¶„ë§Œ ìµœì†Œ í¡ìˆ˜ ë³€í™”ê°€ í”¼ê³¤í•˜ë‹¤ë©´, â€œë‚´ê°€ ê³„ì† ìœ ì§€í•  ê²ƒâ€ê³¼ â€œë²„ë ¤ë„ ë˜ëŠ” ê²ƒâ€ì„ êµ¬ë¶„í•´ ì¼ìƒ í”¼ë¡œë„ë¥¼ ì¤„ì´ê¸° ì·¨í–¥ì˜ ê¹Šì´ë¥¼ ì½˜í…ì¸ (í›„ê¸°, ë¦¬ë·°, ê¸°ë¡)ë¡œ ë‚¨ê¸°ë©´ ì˜¤íˆë ¤ ë¦¬ë”ì‹­ê³¼ ì˜í–¥ë ¥ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
        character:`ê·¹ ì¤‘ ì¸ë¬¼ë¡œëŠ” êµ¬ìí›ˆ ì•„ì €ì”¨ë¥¼ ë‹®ì•˜êµ°ìš”!`
      }
    };

    // í”„ë¡œí† íƒ€ì… ì¢Œí‘œ (fallback ìš©)
    const PROTOTYPES = [
      { name:"íŠ¸ë Œë“œ ì„œí¼", coords:[90,90,70] },
      { name:"íŠ¸ë Œë“œ ìŠ¤ìœ„ë¨¸", coords:[70,65,60] },
      { name:"íŠ¸ë Œë“œ ëŸ¬ë„ˆ", coords:[80,70,40] },
      { name:"íŠ¸ë Œë“œ ì°ë¨¹ëŸ¬", coords:[40,60,60] },
      { name:"íŠ¸ë Œë“œ ë¶ˆí¸ëŸ¬", coords:[60,35,40] },
      { name:"íŠ¸ë Œë“œ ë°¸ëŸ°ì„œ", coords:[60,50,75] },
      { name:"íŠ¸ë Œë“œ ì±Œë¦°ì €", coords:[45,35,75] },
      { name:"íŠ¸ë Œë“œë¥¼ ê±°ë¶€í•˜ëŠ” ì†Œë‚˜ë¬´", coords:[30,30,70] },
    ];

    // -------------------------------
    // ìƒíƒœ
    // -------------------------------
    const TOTAL = 10;           // ë¬¸í•­ ìˆ˜
    let step = 0;               // 0:ì†Œê°œ, 1..10:ë¬¸í•­, 11:ê²°ê³¼
    const answers = Array(TOTAL).fill(null); // ì‚¬ìš©ìê°€ ê³ ë¥¸ 1..5

    // ë³µì› (ì„ íƒ)
    try{
      const saved = JSON.parse(localStorage.getItem('trendtest_v1'));
      if(Array.isArray(saved) && saved.length===TOTAL){ saved.forEach((v,i)=>answers[i]=v) }
    }catch{}

    // -------------------------------
    // ì±„ì 
    // -------------------------------
    const rev = (x) => 6 - x;
    const mean = (arr) => arr.reduce((a,b)=>a+b,0)/arr.length;
    const to100 = (avg) => ((avg-1)/4)*100;

    function calcScores(){
      const [q1,q2,q3,q4,q5,q6,q7,q8,q9,q10] = answers.map(Number);
      const S = to100(mean([q1,q2,q3,q9]));
      const V = to100(mean([rev(q4), q5, rev(q8)]));
      const A = to100(mean([q6,q7,q10]));
      return {S,V,A};
    }

    function pickType(S,V,A){
      let rule=null, type=null;
      if(S>=80 && V>=75 && A>=60){ type = "íŠ¸ë Œë“œ ì„œí¼"; rule = "#1 ì„œí¼" }
      else if(S>=70 && V>=60 && A<60){ type = "íŠ¸ë Œë“œ ëŸ¬ë„ˆ"; rule = "#2 ëŸ¬ë„ˆ" }
      else if((S>=60 && V>=50 && V<75) || (S>=50 && S<70 && V>=60)){ type = "íŠ¸ë Œë“œ ìŠ¤ìœ„ë¨¸"; rule = "#3 ìŠ¤ìœ„ë¨¸" }
      else if(S<50 && V>=55){ type = "íŠ¸ë Œë“œ ì°ë¨¹ëŸ¬"; rule = "#4 ì°ë¨¹ëŸ¬" }
      else if(S>=50 && S<70 && V>=48 && V<=58 && A>=65){ type = "íŠ¸ë Œë“œ ë°¸ëŸ°ì„œ"; rule = "#5 ë°¸ëŸ°ì„œ" }
      else if(V<45 && S>=45 && A<65){ type = "íŠ¸ë Œë“œ ë¶ˆí¸ëŸ¬"; rule = "#6 ë¶ˆí¸ëŸ¬" }
      else if(V<45 && A>=65 && S<60){ type = "íŠ¸ë Œë“œ ì±Œë¦°ì €"; rule = "#7 ì±Œë¦°ì €" }
      else if(V<35 && S<40){ type = "íŠ¸ë Œë“œë¥¼ ê±°ë¶€í•˜ëŠ” ì†Œë‚˜ë¬´"; rule = "#8 ì†Œë‚˜ë¬´" }

      if(type) return {type, rule};
      const dists = PROTOTYPES.map(p=>({ name:p.name, d:Math.hypot(S-p.coords[0], V-p.coords[1], A-p.coords[2]) }))
                              .sort((a,b)=>a.d-b.d);
      return { type:dists[0].name, rule:`fallback â€¢ ${dists[0].name}` };
    }

    // -------------------------------
    // ë Œë”ë§/ë‚´ë¹„ê²Œì´ì…˜
    // -------------------------------
    const $prog = document.getElementById('prog');
    const $progressWrap = document.getElementById('progressWrap');
    const $step0 = document.getElementById('step0');
    const $stepQ = document.getElementById('stepQ');
    const $stepR = document.getElementById('stepR');
    const $qCard = document.getElementById('qCard');
    const $btnPrev = document.getElementById('btnPrev');
    const $btnNext = document.getElementById('btnNext');

    function setProgress(){
      const pct = Math.min(100, Math.max(0, step/11*100));
      $prog.style.width = pct + '%';
    }

    function show(stepIdx){
      step = stepIdx; setProgress();
      [$step0,$stepQ,$stepR].forEach(el=>el.classList.remove('show'));
      if(step===0){
        $step0.classList.add('show');
        $btnPrev.disabled = true; $btnPrev.classList.add('hide'); 
        $btnNext.textContent = 'ì‹œì‘í•˜ê¸°';
				$btnNext.disabled = false;
        $progressWrap.classList.remove('hide');
      } else if(step>=1 && step<=10){
        renderQuestion(step);
        $stepQ.classList.add('show');
        $btnPrev.disabled = false; $btnPrev.classList.remove('hide');
        $btnNext.textContent = (step===10? 'ê²°ê³¼ ë³´ê¸°' : 'ë‹¤ìŒ');
        $btnNext.disabled = (answers[step-1]==null);
        $progressWrap.classList.remove('hide');
      } else {
        renderResult();
        $stepR.classList.add('show');
        // ê²°ê³¼ í˜ì´ì§€ ìš”êµ¬ì‚¬í•­: ì´ì „ ë²„íŠ¼/ìš°ìƒë‹¨ ì§„í–‰ë°” ìˆ¨ê¹€
        $btnPrev.classList.add('hide');
        $btnNext.textContent = 'ë‹¤ì‹œ ì‹œì‘';
        $progressWrap.classList.add('hide');
      }
    }

    function renderQuestion(n){
      const q = QUESTIONS[n-1];
      const current = answers[n-1];
      const ORIENT_AGREE_LEFT = false; 
      const values = ORIENT_AGREE_LEFT ? [5,4,3,2,1] : [1,2,3,4,5];
      const leftLabel  = ORIENT_AGREE_LEFT ? 'ê·¸ë ‡ë‹¤' : 'ê·¸ë ‡ì§€ ì•Šë‹¤';
      const rightLabel = ORIENT_AGREE_LEFT ? 'ê·¸ë ‡ì§€ ì•Šë‹¤' : 'ê·¸ë ‡ë‹¤';

      $qCard.innerHTML = `
        <div class="sub" style="margin-bottom:8px">ë¬¸í•­ ${n} / ${TOTAL}</div>
        <div class="q-title">${q.text}</div>
        <div class="scale" role="radiogroup" aria-label="ë¬¸í•­ ${n}">
          <div class="likert">
            ${values.map(v=>`
              <label class="item" title="${v}">
                <input type="radio" name="q${n}" value="${v}" ${current===v? 'checked':''}>
                <span class="dot" aria-hidden="true"></span>
                <span class="sr-only">${v}</span>
              </label>
            `).join('')}
          </div>
          <div class="labels"><span>${leftLabel}</span><span>${rightLabel}</span></div>
        </div>
      `;

      $qCard.querySelectorAll('input[type=radio]').forEach(input=>{
        input.addEventListener('change', (e)=>{
          answers[n-1] = Number(e.target.value);
          localStorage.setItem('trendtest_v1', JSON.stringify(answers));
          $btnNext.disabled = false;
        });
      });
    }

    function renderResult(){
      const {S,V,A} = calcScores();
      const picked = pickType(S,V,A);
      const $typeName = document.getElementById('typeName');
      const $badge = document.getElementById('badge');
      const $barS = document.getElementById('barS');
      const $barV = document.getElementById('barV');
      const $barA = document.getElementById('barA');
      const $body = document.getElementById('resultBody');
      const $char = document.getElementById('characterNote');

      const txt = TYPE_TEXT[picked.type] || {emoji:'âœ¨', body:'', character:''};
      $typeName.textContent = picked.type;
      $badge.textContent = txt.emoji + ' ' + picked.type;
      $barS.style.width = S+'%';
      $barV.style.width = V+'%';
      $barA.style.width = A+'%';

      $body.innerHTML = txt.body.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
      $char.textContent = txt.character;

      // ê²°ê³¼ í™”ë©´ì—ì„œëŠ” ë’¤ë¡œê°€ê¸° ê¸ˆì§€ + ì„ íƒ ì´ˆê¸°í™”
      const cleared = Array(TOTAL).fill(null);
      localStorage.removeItem('trendtest_v1');
      for(let i=0;i<TOTAL;i++) answers[i] = cleared[i];
    }

    // ë‚´ë¹„ê²Œì´ì…˜
    document.getElementById('btnPrev').addEventListener('click', ()=>{ if(step>0) show(step-1); });
    document.getElementById('btnNext').addEventListener('click', ()=>{
      if(step===0){ show(1); return; }
      if(step>=1 && step<10){ show(step+1); return; }
      if(step===10){ if(answers.some(v=>v==null)){ alert('ëª¨ë“  ë¬¸í•­ì— ì‘ë‹µí•´ì£¼ì„¸ìš”.'); return; } show(11); return; }
      if(step===11){ show(0); }
    });

    // ë‚´ì¥ í…ŒìŠ¤íŠ¸ (#test)
    function selfTest(){
      const demoSets = [
        { name:'ì„œí¼ ê¸°ëŒ€', a:[5,5,5,1,5,4,3,1,5,4] },
        { name:'ìŠ¤ìœ„ë¨¸ ê¸°ëŒ€', a:[4,4,3,2,4,3,3,3,4,3] },
        { name:'ì†Œë‚˜ë¬´ ê¸°ëŒ€', a:[1,2,2,5,1,5,5,5,2,5] },
        { name:'ëŸ¬ë„ˆ ê¸°ëŒ€', a:[5,4,4,2,4,2,2,3,4,2] },
        { name:'ë°¸ëŸ°ì„œ ê¸°ëŒ€', a:[4,3,3,3,3,4,4,3,3,5] },
        { name:'ë¶ˆí¸ëŸ¬ ê¸°ëŒ€', a:[3,3,3,5,2,2,2,4,3,2] },
      ];
      demoSets.forEach(set=>{
        for(let i=0;i<TOTAL;i++) answers[i]=set.a[i];
        const s = calcScores();
        const p = pickType(s.S,s.V,s.A);
        console.log(`[í…ŒìŠ¤íŠ¸] ${set.name}:`, s, p.type);
      });
      for(let i=0;i<TOTAL;i++) answers[i]=null;
    }
    if(location.hash==='#test'){ selfTest(); }

    // ì´ˆê¸° ë Œë”
    show(0);
  </script>
</body>
</html>

